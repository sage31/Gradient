<!DOCTYPE html>
<html>
<head>

    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@600&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>

<body>


    <h1 id="title">SCUCrushes</h1>

    <div id="login">
        <button class="customButton" onclick="testfunc()">
            <img width="20px" alt="Google logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png" style="position:relative; right:10px; top:5px;" />
            Login with Google
        </button>
        <div id="emailErr" style="visibility:hidden">

        </div>
        <div id="accountForm" style="visibility:hidden">
            <p>
                Please enter in the following information
                to create an account.
            </p>
            <form>
                <select name="gradClass" id="year">
                    <option id="none">Select your graduation year</option>
                    <option id="y1"></option>
                    <option id="y2"></option>
                    <option id="y3"></option>
                    <option id="y4"></option>
                    <option id="y5"></option>
                </select>
                </br>
                <p>First Name</p>
                <input id="firstName" placeholder="John" />
                </br>
                <p>Last Name</p>
                <input id="lastName" placeholder="Applebee" />

            </form>
            </br>
            <button id="createAcc" onclick="addUserToDataBase()"> Continue </button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js'
        import { getAuth, signInWithPopup, GoogleAuthProvider } from 'https://www.gstatic.com/firebasejs/9.13.0/firebase-auth.js'
        //import { getFirestore } from 'https://www.gstatic.com/firebasejs/9.13.0/firebase-firestore.js'
        import { getDatabase, ref, set, get, child } from 'https://www.gstatic.com/firebasejs/9.13.0/firebase-database.js'

        const firebaseConfig = {
            apiKey: "AIzaSyDQF_w0iISHkuR_2HJUkpQhz5v7LKmhjPo",
            authDomain: "scucrushes-a9663.firebaseapp.com",
            databaseURL: "https://scucrushes-a9663-default-rtdb.firebaseio.com",
            projectId: "scucrushes-a9663",
            storageBucket: "scucrushes-a9663.appspot.com",
            messagingSenderId: "1027917905596",
            appId: "1:1027917905596:web:54c1a478e31f4007c75ab9",
            measurementId: "G-CFJTYX3MYW"
        };

        window.app = initializeApp(firebaseConfig);
        window.moduleGet = get;
        window.moduleSet = set;
        window.moduleRef = ref;
        window.modChild = child;
        window.database = getDatabase(app);
        window.auth = getAuth(window.app);
        //
        window.gap = GoogleAuthProvider;
        window.provider = new GoogleAuthProvider();

        window.signIn = signInWithPopup;


    </script>

    <script>
        function testfunc() {
            window.signIn(window.auth, window.provider)
                .then((result) => {
                    // This gives you a Google Access Token. You can use it to access the Google API.
                    const credential = window.gap.credentialFromResult(result);
                    const token = credential.accessToken;
                    // The signed-in user info.
                    const user = result.user;
                    // ...
                }).catch((error) => {
                    // Handle Errors here.
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    // The email of the user's account used.
                    const email = error.customData.email;
                    // The AuthCredential type that was used.
                    const credential = window.gap.credentialFromError(error);
                    // ...
                });
        }
    </script>
    <script src="index.js"></script>

    <br><br><br>
    <footer>
        <h5>Made by Stephen Dean, Anish Shanmuganathan, and Ethan Clawsie</h5>
    </footer>


</body>

</html>
